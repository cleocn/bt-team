define(["exports","/Public/build/base.js"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(e,"__esModule",{value:!0}),e.html=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=e.html=function(e){function t(){n(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._event_init(),e}return o(t,e),r(t,[{key:"_event_init",value:function(){this.event(),this.editor_init(),this.editor_node_init(),this.title_init(),this.default(),this.login()}},{key:"event",value:function(){$(".logout").click(function(){QC.Login.signOut(),location.href=_config.CONTROLLER_NAME})}},{key:"login",value:function(){var e=this,t=this;setTimeout(function(){if(null==_config.userinfo){layer.open({type:1,title:!1,closeBtn:0,shadeClose:!1,skin:"layer_login",content:' <header>BT文档</header><section><button>使用QQ帐号登陆<div id="login"></div></button></section>'}),QC.Login({btnId:"login"})}},500),QC.api("get_user_info",{}).success(function(n){e.close(),_config.userinfo=n.data,$(".user img").attr("src",_config.userinfo.figureurl_qq_2);var i={url:_config.CONTROLLER_NAME+"/save",data:_config.userinfo};t.ajax(i,function(e){log(e)})})}},{key:"default",value:function(){$("#edit-box").html('<div class="row-1-2 row-1" key="764824">品牌全案策划就是建立品牌、塑造品牌并完善品牌的一个过程，希望通过品牌全案策划的终极解决方案来完善企业品牌，使之成为行业内，市场中的一个知名 品牌，让这个品牌不仅有着极高的知名度，还具有不同凡响的美誉度，这才是做品牌全案策划的最终目的。</div><div class="row-1-4 row-1" key="873382"><br></div><div class="row-1-3 row-1" key="389376">那么接下来，先知品牌就来给大家简单的说一说2016 年终极品牌全案策划解决方案，希望能够给企业带来帮助。<br></div><div class="row-1-6 row-1" key="765449"><br></div><div class="row-1-5 row-1 content-undefined" key="999199"><b>1、前期调研</b><br>市场调研前期，我们一般分为三个步骤，第一，明确调研意图。第二，收集资料，分析问题。第三，确定市场调研主题。</div><div class="row-1-7 row-1" key="591420"><br><b>2、组织策划</b><br>先知品牌对品牌全案策划前期的组织策划提供以下思路：品牌整合策划、市场整合营销策划、企业视觉识别系统（VI）设计、产品包装设计与创意、销售终端生动 化创意与设计、影视广告的创意、平面设计广告的创意与策划、产品招商全程策划、企业销售管理体系、企业销售队伍培训等等。</div><div class="row-1-8 row-1" key="425025"><br><b>3、确立实施</b><br>品牌定位方案的确定、品牌全案设计的确定、品牌名称的确定、品牌商标的确定及注册、品牌营销方案的确定、品牌产品价格的确定、主推产品的确定、推广营销渠道的确定、品牌全案策划费用的确定、品牌推广营销的时间段的确定、品牌全案策划解决方案效果的评估预测等。<br></div>'),$("#edit-box").html($("#edit-box").html()+'<div></div><div class="row-1-9 row-1" key="648338" style="text-align: right;"><img src="http://e.xianzhi.net/uploads/allimg/160616/47_160616135922_1.jpg"></div>'),$("#title").val("2017年产品设计方案"),document.title=$("#title").val()}},{key:"title_init",value:function(){$("#title").keyup(function(){document.title=$(this).val()||"无标题"})}},{key:"editor_node_init",value:function(){var e=this,t=this;node.addEventListener("input",function(n){0==$("#edit-box div").size()&&t.default(),_is_back=!1;var i=e.getSelectionStart();if(void 0!=i&&1===i.nodeType&&"DIV"==i.nodeName){_is_back=!1;var o=$("#edit-box div").size()+1,r=$(i);socket._emit({author:"row-"+_config.userid,line:o,txt:r.html(),key:r.attr("key"),style:r.attr("style")})}},!1),node.addEventListener("DOMNodeInserted",function(e){if(!_is_back){var t=$(e.target),n=$("#edit-box div").size()+1,i=Math.round(1e6*Math.random());"DIV"==t.context.nodeName&&t.attr("class","row-"+_config.userid+"-"+n).attr("key",i).addClass("row-"+_config.userid)}},!1)}},{key:"editor_init",value:function(){var e=this;$(".html .Controls a").click(function(t){switch($(this).data("role")){case"h1":case"h2":case"p":document.execCommand("formatBlock",!1,"<"+$(this).data("role")+">");break;default:document.execCommand($(this).data("role"),!1,null);var n=$(e.getSelected().baseNode.parentElement),i=n.context.className;i||(n=$(n.context.parentNode),i=n.context.parentNode.className);var o=i.split("-");socket._emit({author:o[0]+"-"+o[1],line:o[2],txt:n.html(),key:n.attr("key")})}})}},{key:"getSelected",value:function(){return window.getSelection?window.getSelection():document.getSelection?document.getSelection():document.selection?document.selection.createRange():null}},{key:"getSelectionStart",value:function(){var e=document.getSelection().anchorNode;return 3==e.nodeType?e.parentNode:e}}]),t}(t.base);window.html=new a});